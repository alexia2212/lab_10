<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>Juego de la memoria</title>
</head>
<body>

<h1>El Juego de la Memoria</h1>

<h5>Total de imágenes seleccionadas: <span id="imageCount">0</span></h5>

<input type="file" id="inputFile" accept="image/png" multiple>

<button id="loadImagesButton">Cargar imágenes</button>
<div id="imageContainer"></div>

<button onclick="generarCuadro()">Agregar Tablero</button>
<div id="container"></div>

<style>
    .thumbnail {
        max-width: 200px;
        max-height: 200px;
        margin: 10px;
    }
    .block {

        background-color: #49BCD4;
        border: 1px solid black;
        width: 200px;
        height: 200px;
        margin-bottom: 20px;
        display: inline-block;
    }
</style>
<script>
    function generarCuadro() {
        var imagenes = document.getElementById('imageContainer').getElementsByTagName('img');
        var numImagenes = imagenes.length;

        var numCols = 3; // Número de columnas deseado
        var numRows = Math.ceil(numImagenes / numCols); // Calcular el número de filas

        var container = document.getElementById('container');
        container.innerHTML = ''; // Limpiar el contenido actual

        for (var i = 0; i < numRows; i++) {
            var row = document.createElement('div');
            row.className = 'row';

            for (var j = 0; j < numCols; j++) {
                var imgIndex = i * numCols + j;
                if (imgIndex < numImagenes) {
                    var img = imagenes[imgIndex].cloneNode(true);
                    var block = document.createElement('div');
                    block.style.backgroundImage = img;
                    block.style.backgroundSize = "190px 200px";
                    block.className = 'block';
                    block.appendChild(img);
                    row.appendChild(block);
                }
            }

            container.appendChild(row);
        }
    }
</script>
<script>
    function generarBloques() {
        var numImagenes = document.getElementById('imageContainer').children.length; //6
        var numColumnas = 3; // Número de columnas deseado
        var numFilas = Math.ceil(numImagenes*2 / numColumnas); // 4

        var container = document.getElementById('bloque');
        container.innerHTML = ''; // Limpiar el contenido actual

        for (var i = 0; i < numFilas; i++) {
            var row = document.createElement('div');
            row.className = 'row';

            for (var j = 0; j < numColumnas; j++) {
                var imgIndex = i * numColumnas + j;
                if (imgIndex < numImagenes) {
                    var bloque = document.createElement("imgIndex");
                    bloque.className = "bloque";
                    row.appendChild(bloque);
                }
            }

            container.appendChild(row);
        }
    }
</script>


<script>

    document.getElementById('loadImagesButton').addEventListener('click', loadImages);

    function loadImages() {
        var filesInput = document.getElementById('inputFile');
        var files = filesInput.files;
        var imageContainer = document.getElementById('imageContainer');

        for (var i = 0; i < files.length; i++) {
            var file = files[i];

            if (!file.type.match('image.*')) {
                continue;
            }

            var reader = new FileReader();
            reader.onload = (function (aFile) {
                return function (e) {
                    var imgContainer = document.createElement('div');
                    imgContainer.classList.add('image-item');

                    var closeButton = document.createElement('span');
                    closeButton.classList.add('close-button', 'w3-button', 'w3-display-topright');
                    closeButton.innerHTML = '&times;';
                    closeButton.onclick = function() {
                        deleteImage(imgContainer);
                    };

                    var img = document.createElement('img');
                    img.classList.add('thumbnail');
                    img.src = e.target.result;

                    imgContainer.appendChild(closeButton);
                    imgContainer.appendChild(img);
                    imageContainer.appendChild(imgContainer);
                };
            })(file);

            reader.readAsDataURL(file);

            var imageCount = document.getElementById('imageCount');
            imageCount.textContent = parseInt(imageCount.textContent) + 1;
        }
    }

    function deleteImage(imageContainer) {
        var imageCount = document.getElementById('imageCount');
        imageCount.textContent = parseInt(imageCount.textContent) - 1;
        imageContainer.parentNode.removeChild(imageContainer);
    }
</script>
</body>
</html>